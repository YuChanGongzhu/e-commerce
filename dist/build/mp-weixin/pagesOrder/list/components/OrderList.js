"use strict";const e=require("../../../common/vendor.js"),t=require("../../../services/contants.js"),r=require("../../../services/order.js"),a=require("../../../services/pay.js");require("../../../utils/http.js"),require("../../../stores/index.js"),require("../../../stores/modules/member.js");const i=e.defineComponent({__name:"OrderList",props:{orderState:null},setup(i){const o={page:1,pageSize:5,orderState:i.orderState},d=e.ref([]),s=async()=>{const e=await r.getMemberOrderAPI(o);d.value=e.result.items};e.onMounted((()=>{s()}));const{safeAreaInsets:n}=e.index.getSystemInfoSync();return(r,i)=>{var o;return{a:e.f(d.value,((r,i,o)=>e.e({a:e.t(r.createTime),b:e.t(e.unref(t.orderStateList)[r.orderState].text),c:r.orderState>=e.unref(t.OrderState).DaiPingJia},(r.orderState,e.unref(t.OrderState).DaiPingJia,{}),{d:e.f(r.skus,((t,r,a)=>({a:t.image,b:e.t(t.name),c:e.t(t.attrsText),d:t.id}))),e:`/pagesOrder/detail/detail?id=${r.id}`,f:e.t(r.totalNum),g:e.t(r.totalMoney),h:r.orderState===e.unref(t.OrderState).DaiFuKuan},r.orderState===e.unref(t.OrderState).DaiFuKuan?{i:e.o((i=>(async r=>{{const t=await a.getPayWxPayMiniPayAPI({orderId:r});e.wx$1.requestPayment(t.result)}e.index.showToast({title:"支付成功"}),d.value.find((e=>e.id===r)).orderState=t.OrderState.DaiFaHuo,s()})(r.id)),r.id)}:e.e({j:"/pagesOrder/create/create?orderId=id",k:r.orderState===e.unref(t.OrderState).DaiShouHuo},(r.orderState,e.unref(t.OrderState).DaiShouHuo,{})),{l:r.id}))),b:e.t("没有更多数据~"),c:(null==(o=e.unref(n))?void 0:o.bottom)+"px"}}}});wx.createComponent(i);
