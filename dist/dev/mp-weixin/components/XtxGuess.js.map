{"version":3,"file":"XtxGuess.js","sources":["../../../../src/components/XtxGuess.vue","../../../../uniComponent:/QzovUHJvZ3JhbXMvaGVpbWEtc2hvcC9zcmMvY29tcG9uZW50cy9YdHhHdWVzcy52dWU"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { GetHomeGoodsGuessLikeAPI } from '@/services/home';\r\nimport type { PageParams } from '@/types/global';\r\nimport type { GuessItem } from \"@/types/home\"\r\nimport { onMounted, ref } from \"vue\";\r\n\r\nconst pageParams: Required<PageParams> = {\r\n    page: 1,\r\n    pageSize: 10,\r\n}\r\n\r\nconst guessList = ref<GuessItem[]>([])\r\nconst finish = ref(false)\r\nconst GetHomeGoodsGuessLikeData = async () => {\r\n    if (finish.value == true) {\r\n        return uni.showToast({ icon: 'none', title: '没有更多数据了' })\r\n    }\r\n    // console.log('数字', pageParams)\r\n    const res = await GetHomeGoodsGuessLikeAPI(pageParams)\r\n    // console.log('猜你喜欢', res)\r\n    // guessList.value = res.result.items\r\n    guessList.value.push(...res.result.items)\r\n    if (pageParams.page < res.result.pages) {\r\n        pageParams.page++\r\n    } else {\r\n        finish.value = true\r\n    }\r\n\r\n}\r\n\r\nconst resetData = async () => {\r\n    console.log('重置')\r\n    pageParams.page = 1\r\n    guessList.value = []\r\n    finish.value = false\r\n}\r\n\r\nonMounted(() => {\r\n    GetHomeGoodsGuessLikeData()\r\n})\r\ndefineExpose({\r\n    getMore: GetHomeGoodsGuessLikeData,\r\n    resetData\r\n})\r\n</script>\r\n\r\n<template>\r\n    <!-- 猜你喜欢 -->\r\n    <view class=\"caption\">\r\n        <text class=\"text\">猜你喜欢</text>\r\n    </view>\r\n    <view class=\"guess\">\r\n        <navigator class=\"guess-item\" v-for=\"item in guessList\" :key=\"item.id\" :url=\"`/pages/goods/goods`\">\r\n            <image class=\"image\" mode=\"aspectFill\" :src=\"item.picture\"></image>\r\n            <view class=\"name\"> {{ item.name }} </view>\r\n            <view class=\"price\">\r\n                <text class=\"small\">¥</text>\r\n                <text>{{ item.price }}</text>\r\n            </view>\r\n        </navigator>\r\n    </view>\r\n    <view class=\"loading-text\"> {{ finish ? '没有更多数据了' : '正在加载loading...' }}</view>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n:host {\r\n    display: block;\r\n}\r\n\r\n/* 分类标题 */\r\n.caption {\r\n    display: flex;\r\n    justify-content: center;\r\n    line-height: 1;\r\n    padding: 36rpx 0 40rpx;\r\n    font-size: 32rpx;\r\n    color: #262626;\r\n\r\n    .text {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        padding: 0 28rpx 0 30rpx;\r\n\r\n        &::before,\r\n        &::after {\r\n            content: '';\r\n            width: 20rpx;\r\n            height: 20rpx;\r\n            background-image: url(@/static/images/bubble.png);\r\n            background-size: contain;\r\n            margin: 0 10rpx;\r\n        }\r\n    }\r\n}\r\n\r\n/* 猜你喜欢 */\r\n.guess {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n    padding: 0 20rpx;\r\n\r\n    .guess-item {\r\n        width: 345rpx;\r\n        padding: 24rpx 20rpx 20rpx;\r\n        margin-bottom: 20rpx;\r\n        border-radius: 10rpx;\r\n        overflow: hidden;\r\n        background-color: #fff;\r\n    }\r\n\r\n    .image {\r\n        width: 304rpx;\r\n        height: 304rpx;\r\n    }\r\n\r\n    .name {\r\n        height: 75rpx;\r\n        margin: 10rpx 0;\r\n        font-size: 26rpx;\r\n        color: #262626;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        display: -webkit-box;\r\n        -webkit-line-clamp: 2;\r\n        -webkit-box-orient: vertical;\r\n    }\r\n\r\n    .price {\r\n        line-height: 1;\r\n        padding-top: 4rpx;\r\n        color: #cf4444;\r\n        font-size: 26rpx;\r\n    }\r\n\r\n    .small {\r\n        font-size: 80%;\r\n    }\r\n}\r\n\r\n// 加载提示文字\r\n.loading-text {\r\n    text-align: center;\r\n    font-size: 28rpx;\r\n    color: #666;\r\n    padding: 20rpx 0;\r\n}\r\n</style>","import Component from 'C:/Programs/heima-shop/src/components/XtxGuess.vue'\nwx.createComponent(Component)"],"names":["ref","uni","GetHomeGoodsGuessLikeAPI","onMounted"],"mappings":";;;;;;;;;AAMA,UAAM,aAAmC;AAAA,MACrC,MAAM;AAAA,MACN,UAAU;AAAA,IAAA;AAGR,UAAA,YAAYA,kBAAiB,CAAA,CAAE;AAC/B,UAAA,SAASA,kBAAI,KAAK;AACxB,UAAM,4BAA4B,YAAY;AACtC,UAAA,OAAO,SAAS,MAAM;AACtB,eAAOC,cAAAA,MAAI,UAAU,EAAE,MAAM,QAAQ,OAAO,WAAW;AAAA,MAC3D;AAEM,YAAA,MAAM,MAAMC,uCAAyB,UAAU;AAGrD,gBAAU,MAAM,KAAK,GAAG,IAAI,OAAO,KAAK;AACxC,UAAI,WAAW,OAAO,IAAI,OAAO,OAAO;AACzB,mBAAA;AAAA,MAAA,OACR;AACH,eAAO,QAAQ;AAAA,MACnB;AAAA,IAAA;AAIJ,UAAM,YAAY,YAAY;AAC1B,cAAQ,IAAI,IAAI;AAChB,iBAAW,OAAO;AAClB,gBAAU,QAAQ;AAClB,aAAO,QAAQ;AAAA,IAAA;AAGnBC,kBAAAA,UAAU,MAAM;AACc;IAAA,CAC7B;AACY,WAAA;AAAA,MACT,SAAS;AAAA,MACT;AAAA,IAAA,CACH;;;;;;;;;;;;;;;;;;AC1CD,GAAG,gBAAgB,SAAS;"}