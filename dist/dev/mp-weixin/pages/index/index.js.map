{"version":3,"file":"index.js","sources":["../../../../../src/pages/index/index.vue","../../../../../uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport XtxSwiper from '@/components/XtxSwiper.vue';\r\nimport XtxGuess from '@/components/XtxGuess.vue';\r\n\r\nimport CustomNavbar from './component/CustomNavbar.vue'\r\nimport CategoryPanel from './component/CategoryPanel.vue';\r\nimport HotPannel from './component/HotPannel.vue';\r\nimport PageSkeleton from './component/PageSkeleton.vue';\r\nimport { getHomeBannerAPI, getHomeCategoryAPI, getHomeHotAPI } from '@/services/home';\r\nimport type { BannerItem, CategoryItem, HotItem } from \"@/types/home\"\r\nimport { ref } from \"vue\";\r\nimport { onLoad } from '@dcloudio/uni-app';\r\nimport { useGuessList } from '@/composables';\r\n\r\nconst bannerList = ref<BannerItem[]>([])\r\nconst getHomeBannerData = async () => {\r\n  const res = await getHomeBannerAPI()\r\n  // console.log('广告轮播', res)\r\n  bannerList.value = res.result\r\n  // console.log(\"bannerlist：\", bannerList.value)\r\n}\r\n\r\nconst categoryList = ref<CategoryItem[]>([])\r\nconst getHomeCategoryData = async () => {\r\n  const res = await getHomeCategoryAPI()\r\n  // console.log('分类', res)\r\n  categoryList.value = res.result\r\n}\r\n\r\nconst hotList = ref<HotItem[]>([])\r\nconst getHomeHotData = async () => {\r\n  const res = await getHomeHotAPI()\r\n  // console.log(\"人气\", res)\r\n  hotList.value = res.result\r\n}\r\n\r\n\r\nconst isLoading = ref(false)\r\nonLoad(async () => {\r\n  isLoading.value = true\r\n  await Promise.all([getHomeBannerData(), getHomeCategoryData(), getHomeHotData()])\r\n  isLoading.value = false\r\n})\r\n\r\n\r\nconst { guessRef, onScrolltolower } = useGuessList()\r\n\r\nconst isTrigger = ref(false)\r\n\r\nconst onRefresherrefresh = async () => {\r\n  // console.log('下拉刷新')\r\n  isTrigger.value = true\r\n  // await (getHomeBannerData(), getHomeCategoryData(), getHomeHotData())\r\n  guessRef.value?.resetData()\r\n  await Promise.all([getHomeBannerData(), getHomeCategoryData(), getHomeHotData(), guessRef.value?.getMore()])\r\n  isTrigger.value = false\r\n\r\n}\r\n</script>\r\n\r\n<template>\r\n  <PageSkeleton v-if=\"isLoading\" />\r\n  <template v-else>\r\n    <custom-navbar></custom-navbar>\r\n    <scroll-view refresher-enabled :refresher-triggered=\"isTrigger\" @refresherrefresh=\"onRefresherrefresh\"\r\n      @scrolltolower=\"onScrolltolower\" class=\"scroll-view\" scroll-y>\r\n      <XtxSwiper :list=\"bannerList\"></XtxSwiper>\r\n      <CategoryPanel :list=\"categoryList\"></CategoryPanel>\r\n      <HotPannel :list=\"hotList\"></HotPannel>\r\n      <XtxGuess ref=\"guessRef\" />\r\n    </scroll-view>\r\n  </template>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\npage {\r\n  background-color: #f7f7f7;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.scroll-view {\r\n  flex: 1;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'C:/Programs/heima-shop/src/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getHomeBannerAPI","getHomeCategoryAPI","getHomeHotAPI","onLoad","useGuessList"],"mappings":";;;;;;;;;;AACA,MAAA,YAAsB,MAAA;AACtB,MAAA,WAAqB,MAAA;AAErB,MAAA,eAAyB,MAAA;AACzB,MAAA,gBAA0B,MAAA;AAC1B,MAAA,YAAsB,MAAA;AACtB,MAAA,eAAyB,MAAA;;;;AAOnB,UAAA,aAAaA,kBAAkB,CAAA,CAAE;AACvC,UAAM,oBAAoB,YAAY;AAC9B,YAAA,MAAM,MAAMC,cAAAA;AAElB,iBAAW,QAAQ,IAAI;AAAA,IAAA;AAInB,UAAA,eAAeD,kBAAoB,CAAA,CAAE;AAC3C,UAAM,sBAAsB,YAAY;AAChC,YAAA,MAAM,MAAME,cAAAA;AAElB,mBAAa,QAAQ,IAAI;AAAA,IAAA;AAGrB,UAAA,UAAUF,kBAAe,CAAA,CAAE;AACjC,UAAM,iBAAiB,YAAY;AAC3B,YAAA,MAAM,MAAMG,cAAAA;AAElB,cAAQ,QAAQ,IAAI;AAAA,IAAA;AAIhB,UAAA,YAAYH,kBAAI,KAAK;AAC3BI,kBAAAA,OAAO,YAAY;AACjB,gBAAU,QAAQ;AACZ,YAAA,QAAQ,IAAI,CAAC,kBAAA,GAAqB,uBAAuB,eAAgB,CAAA,CAAC;AAChF,gBAAU,QAAQ;AAAA,IAAA,CACnB;AAGD,UAAM,EAAE,UAAU,gBAAgB,IAAIC,kBAAa,aAAA;AAE7C,UAAA,YAAYL,kBAAI,KAAK;AAE3B,UAAM,qBAAqB,YAAY;;AAErC,gBAAU,QAAQ;AAElB,qBAAS,UAAT,mBAAgB;AAChB,YAAM,QAAQ,IAAI,CAAC,kBAAqB,GAAA,oBAAA,GAAuB,eAAA,IAAkB,cAAS,UAAT,mBAAgB,SAAS,CAAC;AAC3G,gBAAU,QAAQ;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtDpB,GAAG,WAAW,eAAe;"}